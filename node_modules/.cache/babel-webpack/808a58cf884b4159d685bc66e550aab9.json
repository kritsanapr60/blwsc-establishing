{"ast":null,"code":"import { Injectable } from \"@angular/core\";\nvar M = \"m\";\nvar MM = \"mm\";\nvar MMM = \"mmm\";\nvar DD = \"dd\";\nvar YYYY = \"yyyy\";\nexport var UtilService = function () {\n  function UtilService() {}\n\n  UtilService.prototype.isDateValid = function (dateStr, dateFormat, minYear, maxYear, disableUntil, disableSince, disableWeekends, disableDays, disableDateRanges, monthLabels, enableDays) {\n    var returnDate = {\n      day: 0,\n      month: 0,\n      year: 0\n    };\n    var daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    var isMonthStr = dateFormat.indexOf(MMM) !== -1;\n    var separators = this.getDateFormatSeparators(dateFormat);\n    var month = isMonthStr ? this.parseDatePartMonthName(dateFormat, dateStr, MMM, monthLabels) : this.parseDatePartNumber(dateFormat, dateStr, MM);\n\n    if (isMonthStr && monthLabels[month]) {\n      dateFormat = this.changeDateFormat(dateFormat, monthLabels[month].length);\n    }\n\n    if (dateStr.length !== dateFormat.length) {\n      return returnDate;\n    }\n\n    if (dateFormat.indexOf(separators[0]) !== dateStr.indexOf(separators[0]) || dateFormat.lastIndexOf(separators[1]) !== dateStr.lastIndexOf(separators[1])) {\n      return returnDate;\n    }\n\n    var day = this.parseDatePartNumber(dateFormat, dateStr, DD);\n    var year = this.parseDatePartNumber(dateFormat, dateStr, YYYY);\n\n    if (month !== -1 && day !== -1 && year !== -1) {\n      if (year < minYear || year > maxYear || month < 1 || month > 12) {\n        return returnDate;\n      }\n\n      var date = {\n        year: year,\n        month: month,\n        day: day\n      };\n\n      if (this.isDisabledDay(date, disableUntil, disableSince, disableWeekends, disableDays, disableDateRanges, enableDays)) {\n        return returnDate;\n      }\n\n      if (year % 400 === 0 || year % 100 !== 0 && year % 4 === 0) {\n        daysInMonth[1] = 29;\n      }\n\n      if (day < 1 || day > daysInMonth[month - 1]) {\n        return returnDate;\n      }\n\n      return date;\n    }\n\n    return returnDate;\n  };\n\n  UtilService.prototype.getDateFormatSeparators = function (dateFormat) {\n    return dateFormat.match(/[^(dmy)]{1,}/g);\n  };\n\n  UtilService.prototype.changeDateFormat = function (dateFormat, len) {\n    var mp = \"\";\n\n    for (var i = 0; i < len; i++) {\n      mp += M;\n    }\n\n    return dateFormat.replace(MMM, mp);\n  };\n\n  UtilService.prototype.isMonthLabelValid = function (monthLabel, monthLabels) {\n    for (var key = 1; key <= 12; key++) {\n      if (monthLabel.toLowerCase() === monthLabels[key].toLowerCase()) {\n        return key;\n      }\n    }\n\n    return -1;\n  };\n\n  UtilService.prototype.isYearLabelValid = function (yearLabel, minYear, maxYear) {\n    if (yearLabel >= minYear && yearLabel <= maxYear) {\n      return yearLabel;\n    }\n\n    return -1;\n  };\n\n  UtilService.prototype.parseDatePartNumber = function (dateFormat, dateString, datePart) {\n    var pos = this.getDatePartIndex(dateFormat, datePart);\n\n    if (pos !== -1) {\n      var value = dateString.substring(pos, pos + datePart.length);\n\n      if (!/^\\d+$/.test(value)) {\n        return -1;\n      }\n\n      return parseInt(value);\n    }\n\n    return -1;\n  };\n\n  UtilService.prototype.parseDatePartMonthName = function (dateFormat, dateString, datePart, monthLabels) {\n    var monthLabel = \"\";\n    var start = dateFormat.indexOf(datePart);\n\n    if (dateFormat.substr(dateFormat.length - 3) === MMM) {\n      monthLabel = dateString.substring(start);\n    } else {\n      var end = dateString.indexOf(dateFormat.charAt(start + datePart.length), start);\n      monthLabel = dateString.substring(start, end);\n    }\n\n    return this.isMonthLabelValid(monthLabel, monthLabels);\n  };\n\n  UtilService.prototype.getDatePartIndex = function (dateFormat, datePart) {\n    return dateFormat.indexOf(datePart);\n  };\n\n  UtilService.prototype.isSameDate = function (d1, d2) {\n    return d1.year === d2.year && d1.month === d2.month && d1.day === d2.day;\n  };\n\n  UtilService.prototype.parseDefaultMonth = function (monthString) {\n    var month = {\n      monthTxt: \"\",\n      monthNbr: 0,\n      year: 0\n    };\n\n    if (monthString !== \"\") {\n      var split = monthString.split(monthString.match(/[^0-9]/)[0]);\n      month.monthNbr = split[0].length === 2 ? parseInt(split[0]) : parseInt(split[1]);\n      month.year = split[0].length === 2 ? parseInt(split[1]) : parseInt(split[0]);\n    }\n\n    return month;\n  };\n\n  UtilService.prototype.isDisabledDay = function (date, disableUntil, disableSince, disableWeekends, disableDays, disableDateRanges, enableDays) {\n    for (var _i = 0, enableDays_1 = enableDays; _i < enableDays_1.length; _i++) {\n      var e = enableDays_1[_i];\n\n      if (e.year === date.year && e.month === date.month && e.day === date.day) {\n        return false;\n      }\n    }\n\n    var dateMs = this.getTimeInMilliseconds(date);\n\n    if (this.isInitializedDate(disableUntil) && dateMs <= this.getTimeInMilliseconds(disableUntil)) {\n      return true;\n    }\n\n    if (this.isInitializedDate(disableSince) && dateMs >= this.getTimeInMilliseconds(disableSince)) {\n      return true;\n    }\n\n    if (disableWeekends) {\n      var dn = this.getDayNumber(date);\n\n      if (dn === 0 || dn === 6) {\n        return true;\n      }\n    }\n\n    for (var _a = 0, disableDays_1 = disableDays; _a < disableDays_1.length; _a++) {\n      var d = disableDays_1[_a];\n\n      if (d.year === date.year && d.month === date.month && d.day === date.day) {\n        return true;\n      }\n    }\n\n    for (var _b = 0, disableDateRanges_1 = disableDateRanges; _b < disableDateRanges_1.length; _b++) {\n      var d = disableDateRanges_1[_b];\n\n      if (this.isInitializedDate(d.begin) && this.isInitializedDate(d.end) && dateMs >= this.getTimeInMilliseconds(d.begin) && dateMs <= this.getTimeInMilliseconds(d.end)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  UtilService.prototype.isMarkedDate = function (date, markedDates, markWeekends) {\n    for (var _i = 0, markedDates_1 = markedDates; _i < markedDates_1.length; _i++) {\n      var md = markedDates_1[_i];\n\n      for (var _a = 0, _b = md.dates; _a < _b.length; _a++) {\n        var d = _b[_a];\n\n        if (d.year === date.year && d.month === date.month && d.day === date.day) {\n          return {\n            marked: true,\n            color: md.color\n          };\n        }\n      }\n    }\n\n    if (markWeekends && markWeekends.marked) {\n      var dayNbr = this.getDayNumber(date);\n\n      if (dayNbr === 0 || dayNbr === 6) {\n        return {\n          marked: true,\n          color: markWeekends.color\n        };\n      }\n    }\n\n    return {\n      marked: false,\n      color: \"\"\n    };\n  };\n\n  UtilService.prototype.getWeekNumber = function (date) {\n    var d = new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0);\n    d.setDate(d.getDate() + (d.getDay() === 0 ? -3 : 4 - d.getDay()));\n    return Math.round((d.getTime() - new Date(d.getFullYear(), 0, 4).getTime()) / 86400000 / 7) + 1;\n  };\n\n  UtilService.prototype.isMonthDisabledByDisableUntil = function (date, disableUntil) {\n    return this.isInitializedDate(disableUntil) && this.getTimeInMilliseconds(date) <= this.getTimeInMilliseconds(disableUntil);\n  };\n\n  UtilService.prototype.isMonthDisabledByDisableSince = function (date, disableSince) {\n    return this.isInitializedDate(disableSince) && this.getTimeInMilliseconds(date) >= this.getTimeInMilliseconds(disableSince);\n  };\n\n  UtilService.prototype.isInitializedDate = function (date) {\n    return date.year !== 0 && date.month !== 0 && date.day !== 0;\n  };\n\n  UtilService.prototype.getTimeInMilliseconds = function (date) {\n    return new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0).getTime();\n  };\n\n  UtilService.prototype.getDayNumber = function (date) {\n    var d = new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0);\n    return d.getDay();\n  };\n\n  UtilService.decorators = [{\n    type: Injectable\n  }];\n  UtilService.ctorParameters = [];\n  return UtilService;\n}();","map":{"version":3,"sources":["../../../src/my-date-picker/services/my-date-picker.util.service.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { Injectable } from \"@angular/core\";\r\nvar M = \"m\";\r\nvar MM = \"mm\";\r\nvar MMM = \"mmm\";\r\nvar DD = \"dd\";\r\nvar YYYY = \"yyyy\";\r\nexport var UtilService = (function () {\r\n    function UtilService() {\r\n    }\r\n    UtilService.prototype.isDateValid = function (dateStr, dateFormat, minYear, maxYear, disableUntil, disableSince, disableWeekends, disableDays, disableDateRanges, monthLabels, enableDays) {\r\n        var returnDate = { day: 0, month: 0, year: 0 };\r\n        var daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n        var isMonthStr = dateFormat.indexOf(MMM) !== -1;\r\n        var separators = this.getDateFormatSeparators(dateFormat);\r\n        var month = isMonthStr ? this.parseDatePartMonthName(dateFormat, dateStr, MMM, monthLabels) : this.parseDatePartNumber(dateFormat, dateStr, MM);\r\n        if (isMonthStr && monthLabels[month]) {\r\n            dateFormat = this.changeDateFormat(dateFormat, monthLabels[month].length);\r\n        }\r\n        if (dateStr.length !== dateFormat.length) {\r\n            return returnDate;\r\n        }\r\n        if (dateFormat.indexOf(separators[0]) !== dateStr.indexOf(separators[0]) || dateFormat.lastIndexOf(separators[1]) !== dateStr.lastIndexOf(separators[1])) {\r\n            return returnDate;\r\n        }\r\n        var day = this.parseDatePartNumber(dateFormat, dateStr, DD);\r\n        var year = this.parseDatePartNumber(dateFormat, dateStr, YYYY);\r\n        if (month !== -1 && day !== -1 && year !== -1) {\r\n            if (year < minYear || year > maxYear || month < 1 || month > 12) {\r\n                return returnDate;\r\n            }\r\n            var date = { year: year, month: month, day: day };\r\n            if (this.isDisabledDay(date, disableUntil, disableSince, disableWeekends, disableDays, disableDateRanges, enableDays)) {\r\n                return returnDate;\r\n            }\r\n            if (year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)) {\r\n                daysInMonth[1] = 29;\r\n            }\r\n            if (day < 1 || day > daysInMonth[month - 1]) {\r\n                return returnDate;\r\n            }\r\n            return date;\r\n        }\r\n        return returnDate;\r\n    };\r\n    UtilService.prototype.getDateFormatSeparators = function (dateFormat) {\r\n        return dateFormat.match(/[^(dmy)]{1,}/g);\r\n    };\r\n    UtilService.prototype.changeDateFormat = function (dateFormat, len) {\r\n        var mp = \"\";\r\n        for (var i = 0; i < len; i++) {\r\n            mp += M;\r\n        }\r\n        return dateFormat.replace(MMM, mp);\r\n    };\r\n    UtilService.prototype.isMonthLabelValid = function (monthLabel, monthLabels) {\r\n        for (var key = 1; key <= 12; key++) {\r\n            if (monthLabel.toLowerCase() === monthLabels[key].toLowerCase()) {\r\n                return key;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    UtilService.prototype.isYearLabelValid = function (yearLabel, minYear, maxYear) {\r\n        if (yearLabel >= minYear && yearLabel <= maxYear) {\r\n            return yearLabel;\r\n        }\r\n        return -1;\r\n    };\r\n    UtilService.prototype.parseDatePartNumber = function (dateFormat, dateString, datePart) {\r\n        var pos = this.getDatePartIndex(dateFormat, datePart);\r\n        if (pos !== -1) {\r\n            var value = dateString.substring(pos, pos + datePart.length);\r\n            if (!/^\\d+$/.test(value)) {\r\n                return -1;\r\n            }\r\n            return parseInt(value);\r\n        }\r\n        return -1;\r\n    };\r\n    UtilService.prototype.parseDatePartMonthName = function (dateFormat, dateString, datePart, monthLabels) {\r\n        var monthLabel = \"\";\r\n        var start = dateFormat.indexOf(datePart);\r\n        if (dateFormat.substr(dateFormat.length - 3) === MMM) {\r\n            monthLabel = dateString.substring(start);\r\n        }\r\n        else {\r\n            var end = dateString.indexOf(dateFormat.charAt(start + datePart.length), start);\r\n            monthLabel = dateString.substring(start, end);\r\n        }\r\n        return this.isMonthLabelValid(monthLabel, monthLabels);\r\n    };\r\n    UtilService.prototype.getDatePartIndex = function (dateFormat, datePart) {\r\n        return dateFormat.indexOf(datePart);\r\n    };\r\n    UtilService.prototype.isSameDate = function (d1, d2) {\r\n        return d1.year === d2.year && d1.month === d2.month && d1.day === d2.day;\r\n    };\r\n    UtilService.prototype.parseDefaultMonth = function (monthString) {\r\n        var month = { monthTxt: \"\", monthNbr: 0, year: 0 };\r\n        if (monthString !== \"\") {\r\n            var split = monthString.split(monthString.match(/[^0-9]/)[0]);\r\n            month.monthNbr = split[0].length === 2 ? parseInt(split[0]) : parseInt(split[1]);\r\n            month.year = split[0].length === 2 ? parseInt(split[1]) : parseInt(split[0]);\r\n        }\r\n        return month;\r\n    };\r\n    UtilService.prototype.isDisabledDay = function (date, disableUntil, disableSince, disableWeekends, disableDays, disableDateRanges, enableDays) {\r\n        for (var _i = 0, enableDays_1 = enableDays; _i < enableDays_1.length; _i++) {\r\n            var e = enableDays_1[_i];\r\n            if (e.year === date.year && e.month === date.month && e.day === date.day) {\r\n                return false;\r\n            }\r\n        }\r\n        var dateMs = this.getTimeInMilliseconds(date);\r\n        if (this.isInitializedDate(disableUntil) && dateMs <= this.getTimeInMilliseconds(disableUntil)) {\r\n            return true;\r\n        }\r\n        if (this.isInitializedDate(disableSince) && dateMs >= this.getTimeInMilliseconds(disableSince)) {\r\n            return true;\r\n        }\r\n        if (disableWeekends) {\r\n            var dn = this.getDayNumber(date);\r\n            if (dn === 0 || dn === 6) {\r\n                return true;\r\n            }\r\n        }\r\n        for (var _a = 0, disableDays_1 = disableDays; _a < disableDays_1.length; _a++) {\r\n            var d = disableDays_1[_a];\r\n            if (d.year === date.year && d.month === date.month && d.day === date.day) {\r\n                return true;\r\n            }\r\n        }\r\n        for (var _b = 0, disableDateRanges_1 = disableDateRanges; _b < disableDateRanges_1.length; _b++) {\r\n            var d = disableDateRanges_1[_b];\r\n            if (this.isInitializedDate(d.begin) && this.isInitializedDate(d.end) && dateMs >= this.getTimeInMilliseconds(d.begin) && dateMs <= this.getTimeInMilliseconds(d.end)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    UtilService.prototype.isMarkedDate = function (date, markedDates, markWeekends) {\r\n        for (var _i = 0, markedDates_1 = markedDates; _i < markedDates_1.length; _i++) {\r\n            var md = markedDates_1[_i];\r\n            for (var _a = 0, _b = md.dates; _a < _b.length; _a++) {\r\n                var d = _b[_a];\r\n                if (d.year === date.year && d.month === date.month && d.day === date.day) {\r\n                    return { marked: true, color: md.color };\r\n                }\r\n            }\r\n        }\r\n        if (markWeekends && markWeekends.marked) {\r\n            var dayNbr = this.getDayNumber(date);\r\n            if (dayNbr === 0 || dayNbr === 6) {\r\n                return { marked: true, color: markWeekends.color };\r\n            }\r\n        }\r\n        return { marked: false, color: \"\" };\r\n    };\r\n    UtilService.prototype.getWeekNumber = function (date) {\r\n        var d = new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0);\r\n        d.setDate(d.getDate() + (d.getDay() === 0 ? -3 : 4 - d.getDay()));\r\n        return Math.round(((d.getTime() - new Date(d.getFullYear(), 0, 4).getTime()) / 86400000) / 7) + 1;\r\n    };\r\n    UtilService.prototype.isMonthDisabledByDisableUntil = function (date, disableUntil) {\r\n        return this.isInitializedDate(disableUntil) && this.getTimeInMilliseconds(date) <= this.getTimeInMilliseconds(disableUntil);\r\n    };\r\n    UtilService.prototype.isMonthDisabledByDisableSince = function (date, disableSince) {\r\n        return this.isInitializedDate(disableSince) && this.getTimeInMilliseconds(date) >= this.getTimeInMilliseconds(disableSince);\r\n    };\r\n    UtilService.prototype.isInitializedDate = function (date) {\r\n        return date.year !== 0 && date.month !== 0 && date.day !== 0;\r\n    };\r\n    UtilService.prototype.getTimeInMilliseconds = function (date) {\r\n        return new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0).getTime();\r\n    };\r\n    UtilService.prototype.getDayNumber = function (date) {\r\n        var d = new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0);\r\n        return d.getDay();\r\n    };\r\n    UtilService.decorators = [\r\n        { type: Injectable },\r\n    ];\r\n    UtilService.ctorParameters = [];\r\n    return UtilService;\r\n}());\r\n//# sourceMappingURL=my-date-picker.util.service.js.map"]},"metadata":{},"sourceType":"module"}